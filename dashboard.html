<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/manager_dashobard.css" />
    <title>Dashboard</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['corechart'] });
      google.charts.setOnLoadCallback(drawVisualization);

      function drawVisualization() {
        // Some raw data (not necessarily accurate)
        var data = google.visualization.arrayToDataTable([
          ['Month', 'Sales', 'Purchase'],
          ['Jan', 165000, 93000],
          ['Feb', 135000, 112000],
          ['Apr', 150000, 116700],
          ['May', 139000, 111000],
          ['Jun', 136000, 69100],
        ]);

        var options = {
          title: 'Sales & Purchase',
          titleTextStyle: {
            color: '#1f3d2b',
            fontSize: 18,
            bold: true,
          },

          backgroundColor: '#ffffff',

          colors: ['#6EC1F4', '#5AD469'], // Blue & Green

          legend: {
            position: 'bottom',
            textStyle: { color: '#7A869A' },
          },

          hAxis: {
            textStyle: { color: '#7A869A' },
            gridlines: { color: '#f1f1f1' },
          },

          vAxis: {
            textStyle: { color: '#7A869A' },
            gridlines: { color: '#f1f1f1' },
          },

          seriesType: 'bars',
          bar: { groupWidth: '50%' },
          chartArea: {
            width: '85%',
            height: '70%',
          },
        };

        var chart = new google.visualization.ComboChart(
          document.getElementById('chart_div')
        );
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <!-- This is the dashboard page -->
    <div class="page container-fluid">
      <!-- Sidebar Section -->
      <div class="sidebar col">
        <div class="logo-dash">
          <img width="50" src="assist/KGL_logo.png" alt="" />
          <p>Karibu Groceries LTD</p>
        </div>
        <div class="nav-menu">
          <a href="#" class="nav-item active">
            <img src="svg/Rectangle 2804.svg" alt="" />
            <span>Dashboard</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/inventory.svg" alt="" />
            <span>Inventory</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/sales.svg" alt="" />
            <span>Sales</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/checklist 1.svg" alt="" />
            <span>Purchases</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/suppliers.svg" alt="" />
            <span>Suppliers</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/report.svg" alt="" />
            <span>Reports</span>
          </a>
          <a href="#" class="nav-item">
            <img src="svg/store.svg" alt="" />
            <span>Manage Store</span></a
          >
          <div class="settings-logout">
            <a href="#" class="nav-item">
            <img src="svg/settings.svg" alt="" />
            <span>Settings</span></a
          >
          <a href="#" class="nav-item" id="logoutBtn">
            <img src="svg/log_out.svg" alt="" />
            <span>Log Out</span></a
          ></div>
        </div>
      </div>
      <!-- Main Content Section -->
      <div class="main-content">
        <!-- Header Section -->
        <div class="header">
          <h2 id="welcomeMsg">User <span>(Role)</span></h2>
          <div class="header-icons">
            <img src="svg/bell.svg" alt="" />
            <img src="svg/suppliers.svg" alt="" />
          </div>
        </div>
        <!-- Content Section -->
        <div class="part1">
          <div>
            <!-- Stats Cards Section -->
            <div class="row">
              <div class="stats-cards">
                <div class="stat-card">
                  <h3>Inventory Summary</h3>
                  <div class="icon-overview">
                    <div>
                      <img width="30px" src="assist/Quantity (1).png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">300</span> Quantity in Hand
                      </p>
                    </div>
                    <div>
                      <img src="assist/On the way.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">100</span> To be received
                      </p>
                    </div>
                  </div>
                </div>

                <div class="stat-card">
                  <h3>Sales Overview</h3>
                  <div class="icon-overview">
                    <div>
                      <img width="30px" src="assist/Sales.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">200</span> Sales
                      </p>
                    </div>
                    <div>
                      <img src="assist/Cost.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">$80000</span> Cost
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="stats-cards">
                <div class="stat-card">
                  <h3>Product Summary</h3>
                  <div class="icon-overview">
                    <div>
                      <img width="30px" src="assist/Suppliers.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">30</span> Suppliers
                      </p>
                    </div>
                    <div>
                      <img src="assist/Categories.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">10</span> Categories
                      </p>
                    </div>
                  </div>
                </div>

                <div class="stat-card">
                  <h3>Purchase Overview</h3>
                  <div class="icon-overview">
                    <div>
                      <img width="30px" src="assist/Purchase.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">200</span> Purchase
                      </p>
                    </div>
                    <div>
                      <img src="assist/Cost.png" alt="" />
                      <p class="stat-desc">
                        <span class="stat-value">$80000</span> Cost
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--low stok and stats cart -->
          <div class="low-stock-section">
            <div class="section-header">
              <h3>Low Quantity Stock</h3>
              <a href="#" class="see-all-btn">See All</a>
            </div>

            <div class="low-stock-items">
              <div class="stock-item">
                <div class="stock-icon">
                  <img width="" src="" alt="" />
                </div>
                <div class="stock-details">
                  <h4>Grain Maize</h4>
                  <p>Remaining Quantity : 1000 kg</p>
                </div>
              </div>

              <div class="stock-item">
                <div class="stock-icon">
                  <img width="" src="" alt="" />
                </div>
                <div class="stock-details">
                  <h4>G-nuts</h4>
                  <p>Remaining Quantity : 5000 kg</p>
                </div>
              </div>

              <div class="stock-item">
                <div class="stock-icon">
                  <img width="" src="" alt="" />
                </div>
                <div class="stock-details">
                  <h4>Soybeans</h4>
                  <p>Remaining Quantity : 1000 kg</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="part2">
          <div class="chart-container">
            <div id="chart_div" style="width: 550px; height: 300px"></div>
          </div>
          <!-- Top Selling Stock Section -->
          <div class="top-selling-section">
            <div class="section-header">
              <h3>Top Selling Stock</h3>
              <a href="#" class="see-all-btn">See All</a>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Product Name</th>
                  <th>Quantity Sold</th>
                  <th>Remaining Quantity</th>
                  <th>Total Sales</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Rice</td>
                  <td>500 kg</td>
                  <td>200 kg</td>
                  <td>$2000</td>
                </tr>
                <tr>
                  <td>Beans</td>
                  <td>300 kg</td>
                  <td>200 kj</td>
                  <td>$1500</td>
                </tr>
                <tr>
                  <td>Sugar</td>
                  <td>400 kg</td>
                  <td>150 kg</td>
                  <td>$1800</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
     
    </div>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const session = JSON.parse(localStorage.getItem("currentSession"));
        
        if (session) {
          const welcomeMsg = document.getElementById("welcomeMsg");
          welcomeMsg.innerHTML = `${session.username} <span>(${session.role})</span>`;
        } else {
          // Optional: Redirect to login if no session
          // window.location.href = "login.html";
        }

        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
            logoutBtn.addEventListener("click", (e) => {
                e.preventDefault();
                localStorage.removeItem("currentSession");
                window.location.href = "login.html";
            });
        }
      });
    </script>
  </body>
</html>